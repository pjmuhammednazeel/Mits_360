<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360¬∞ Panoramic View</title>
    
    <!-- Panellum CSS -->
    <link rel="stylesheet" href="https://cdn.pannellum.org/2.5/pannellum.css"/>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        #panorama {
            width: 100vw;
            height: 100vh;
        }
        
        .info {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            z-index: 1000;
            font-size: 14px;
        }
        
        .info h2 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }
        
        .info p {
            margin: 5px 0;
            font-size: 12px;
            opacity: 0.9;
        }
        
        .nav-arrow {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .nav-arrow:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateX(-50%) scale(1.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        
        .nav-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .nav-arrow.disabled:hover {
            transform: translateX(-50%) scale(1);
        }
        
        #prev-arrow {
            bottom: 30px;
        }
        
        #next-arrow {
            bottom: 100px;
        }
        
        #side-arrow {
            left: 50%;
            bottom: 100px;
            transform: translateX(-50%);
            display: none;
            margin-left: -80px;
        }
        
        #side-arrow:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        #side-arrow.show {
            display: flex;
        }
        
        #back-arrow {
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            display: none;
        }
        
        #back-arrow:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        #back-arrow.show {
            display: flex;
        }
        
        #home-arrow {
            left: 50%;
            bottom: 100px;
            transform: translateX(-50%);
            display: none;
            margin-left: 80px;
        }
        
        #home-arrow:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        #home-arrow.show {
            display: flex;
        }
        
        #home-back-arrow {
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            display: none;
        }
        
        #home-back-arrow:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        #home-back-arrow.show {
            display: flex;
        }
        
        .nav-arrow svg {
            width: 30px;
            height: 30px;
            fill: #333;
        }
        
        .counter {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            z-index: 1000;
            font-size: 14px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="info">
        <h2>360¬∞ Panoramic View</h2>
        <p>üñ±Ô∏è Drag to look around</p>
        <p>üîç Scroll to zoom</p>
        <p>‚¨ÜÔ∏è‚¨áÔ∏è Navigate scenes</p>
    </div>
    
    <div id="panorama"></div>
    
    <!-- Navigation Arrows -->
    <div id="prev-arrow" class="nav-arrow" onclick="navigatePanorama(-1)">
        <svg viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
        </svg>
    </div>
    
    <div id="next-arrow" class="nav-arrow" onclick="navigatePanorama(1)">
        <svg viewBox="0 0 24 24">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
    </div>
    
    <div id="side-arrow" class="nav-arrow" onclick="goToIndoor()">
        <svg viewBox="0 0 24 24">
            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
        </svg>
    </div>
    
    <div id="back-arrow" class="nav-arrow" onclick="goBackToOutdoor()">
        <svg viewBox="0 0 24 24">
            <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/>
        </svg>
    </div>
    
    <div id="home-arrow" class="nav-arrow" onclick="goToHome()">
        <svg viewBox="0 0 24 24">
            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
        </svg>
    </div>
    
    <div id="home-back-arrow" class="nav-arrow" onclick="goBackToOutdoorFromHome()">
        <svg viewBox="0 0 24 24">
            <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/>
        </svg>
    </div>
    
    <div class="counter" id="counter">1 / 6</div>
    
    <!-- Panellum JavaScript -->
    <script src="https://cdn.pannellum.org/2.5/pannellum.js"></script>
    
    <script>
        console.log('Starting Panellum...');
        
        // Array of panorama scenes
        const scenes = {
            'outdoor_1': {
                "type": "equirectangular",
                "panorama": "assets/outdoor_1.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'outdoor_2': {
                "type": "equirectangular",
                "panorama": "assets/outdoor_2.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0,
                "hotSpots": [
                    {
                        "pitch": 0,
                        "yaw": -90,
                        "type": "scene",
                        "text": "Go to Indoor",
                        "sceneId": "indoor_1",
                        "targetYaw": 0,
                        "targetPitch": 0
                    }
                ]
            },
            'outdoor_3': {
                "type": "equirectangular",
                "panorama": "assets/outdoor_3.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'outdoor_4': {
                "type": "equirectangular",
                "panorama": "assets/outdoor_4.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'outdoor_5': {
                "type": "equirectangular",
                "panorama": "assets/outdoor_5.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0,
                "hotSpots": [
                    {
                        "pitch": 0,
                        "yaw": 90,
                        "type": "scene",
                        "text": "Go to Home",
                        "sceneId": "home_1",
                        "targetYaw": 0,
                        "targetPitch": 0
                    }
                ]
            },
            'outdoor_6': {
                "type": "equirectangular",
                "panorama": "assets/outdoor_6.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'indoor_1': {
                "type": "equirectangular",
                "panorama": "assets/indoor_1.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0,
                "hotSpots": [
                    {
                        "pitch": 0,
                        "yaw": 90,
                        "type": "scene",
                        "text": "Back to Outdoor",
                        "sceneId": "outdoor_2",
                        "targetYaw": 0,
                        "targetPitch": 0
                    }
                ]
            },
            'indoor_2': {
                "type": "equirectangular",
                "panorama": "assets/indoor_2.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'indoor_3': {
                "type": "equirectangular",
                "panorama": "assets/indoor_3.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'indoor_4': {
                "type": "equirectangular",
                "panorama": "assets/indoor_4.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'indoor_5': {
                "type": "equirectangular",
                "panorama": "assets/Indoor_5.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'indoor_6': {
                "type": "equirectangular",
                "panorama": "assets/indoor_6.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'home_1': {
                "type": "equirectangular",
                "panorama": "assets/home_1.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0,
                "hotSpots": [
                    {
                        "pitch": 0,
                        "yaw": -90,
                        "type": "scene",
                        "text": "Back to Outdoor",
                        "sceneId": "outdoor_5",
                        "targetYaw": 0,
                        "targetPitch": 0
                    }
                ]
            },
            'home_2': {
                "type": "equirectangular",
                "panorama": "assets/home_2.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'home_3': {
                "type": "equirectangular",
                "panorama": "assets/home_3.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            },
            'home_4': {
                "type": "equirectangular",
                "panorama": "assets/home_4.jpg",
                "autoLoad": true,
                "showZoomCtrl": true,
                "showFullscreenCtrl": true,
                "mouseZoom": true,
                "hfov": 120,
                "minHfov": 60,
                "maxHfov": 120,
                "pitch": 0,
                "yaw": 0
            }
        };
        
        const outdoorScenes = ['outdoor_1', 'outdoor_2', 'outdoor_3', 'outdoor_4', 'outdoor_5', 'outdoor_6'];
        const indoorScenes = ['indoor_1', 'indoor_2', 'indoor_3', 'indoor_4', 'indoor_5', 'indoor_6'];
        const homeScenes = ['home_1', 'home_2', 'home_3', 'home_4'];
        let currentIndex = 0;
        let indoorIndex = 0;
        let homeIndex = 0;
        let currentScene = 'outdoor_1';
        let viewer;
        
        // Initialize the viewer
        function initViewer(sceneId) {
            if (viewer) {
                viewer.destroy();
            }
            
            const config = {
                "default": {
                    "firstScene": sceneId
                },
                "scenes": scenes
            };
            
            viewer = pannellum.viewer('panorama', config);
            
            viewer.on('error', function(err) {
                console.error('Panellum error:', err);
                alert('Error loading panorama: ' + err);
            });
            
            viewer.on('load', function() {
                console.log('Panorama loaded successfully!');
            });
            
            currentScene = sceneId;
            updateUI();
        }
        
        // Navigate between panoramas
        function navigatePanorama(direction) {
            // Check if we're in outdoor or indoor scenes
            if (outdoorScenes.includes(currentScene)) {
                const newIndex = currentIndex + direction;
                
                if (newIndex >= 0 && newIndex < outdoorScenes.length) {
                    currentIndex = newIndex;
                    currentScene = outdoorScenes[currentIndex];
                    viewer.loadScene(currentScene);
                    updateUI();
                }
            } else if (indoorScenes.includes(currentScene)) {
                const newIndex = indoorIndex + direction;
                
                if (newIndex >= 0 && newIndex < indoorScenes.length) {
                    indoorIndex = newIndex;
                    currentScene = indoorScenes[indoorIndex];
                    viewer.loadScene(currentScene);
                    updateUI();
                }
            } else if (homeScenes.includes(currentScene)) {
                const newIndex = homeIndex + direction;
                
                if (newIndex >= 0 && newIndex < homeScenes.length) {
                    homeIndex = newIndex;
                    currentScene = homeScenes[homeIndex];
                    viewer.loadScene(currentScene);
                    updateUI();
                }
            }
        }
        
        // Go to indoor scene
        function goToIndoor() {
            indoorIndex = 0;
            currentScene = indoorScenes[indoorIndex];
            viewer.loadScene(currentScene);
            updateUI();
        }
        
        // Go back to outdoor scene
        function goBackToOutdoor() {
            currentIndex = 1; // outdoor_2
            currentScene = outdoorScenes[currentIndex];
            viewer.loadScene(currentScene);
            updateUI();
        }
        
        // Go to home scene
        function goToHome() {
            homeIndex = 0;
            currentScene = homeScenes[homeIndex];
            viewer.loadScene(currentScene);
            updateUI();
        }
        
        // Go back to outdoor from home
        function goBackToOutdoorFromHome() {
            currentIndex = 4; // outdoor_5
            currentScene = outdoorScenes[currentIndex];
            viewer.loadScene(currentScene);
            updateUI();
        }
        
        // Update UI elements
        function updateUI() {
            const sideArrow = document.getElementById('side-arrow');
            const backArrow = document.getElementById('back-arrow');
            const homeArrow = document.getElementById('home-arrow');
            const homeBackArrow = document.getElementById('home-back-arrow');
            const counter = document.getElementById('counter');
            const prevArrow = document.getElementById('prev-arrow');
            const nextArrow = document.getElementById('next-arrow');
            
            // Hide all special arrows by default
            sideArrow.classList.remove('show');
            backArrow.classList.remove('show');
            homeArrow.classList.remove('show');
            homeBackArrow.classList.remove('show');
            
            // Show side arrow only when in outdoor_2
            if (currentScene === 'outdoor_2') {
                sideArrow.classList.add('show');
            }
            
            // Show back arrow only when in indoor_1
            if (currentScene === 'indoor_1') {
                backArrow.classList.add('show');
            }
            
            // Show home arrow only when in outdoor_5
            if (currentScene === 'outdoor_5') {
                homeArrow.classList.add('show');
            }
            
            // Show home back arrow only when in home_1
            if (currentScene === 'home_1') {
                homeBackArrow.classList.add('show');
            }
            
            // Update counter and arrows for outdoor scenes
            if (outdoorScenes.includes(currentScene)) {
                currentIndex = outdoorScenes.indexOf(currentScene);
                counter.textContent = `${currentIndex + 1} / ${outdoorScenes.length}`;
                counter.style.display = 'block';
                prevArrow.style.display = 'flex';
                nextArrow.style.display = 'flex';
                
                if (currentIndex === 0) {
                    prevArrow.classList.add('disabled');
                } else {
                    prevArrow.classList.remove('disabled');
                }
                
                if (currentIndex === outdoorScenes.length - 1) {
                    nextArrow.classList.add('disabled');
                } else {
                    nextArrow.classList.remove('disabled');
                }
            } else if (indoorScenes.includes(currentScene)) {
                // In indoor scenes
                indoorIndex = indoorScenes.indexOf(currentScene);
                counter.textContent = `Indoor ${indoorIndex + 1} / ${indoorScenes.length}`;
                counter.style.display = 'block';
                prevArrow.style.display = 'flex';
                nextArrow.style.display = 'flex';
                
                if (indoorIndex === 0) {
                    prevArrow.classList.add('disabled');
                } else {
                    prevArrow.classList.remove('disabled');
                }
                
                if (indoorIndex === indoorScenes.length - 1) {
                    nextArrow.classList.add('disabled');
                } else {
                    nextArrow.classList.remove('disabled');
                }
            } else if (homeScenes.includes(currentScene)) {
                // In home scenes
                homeIndex = homeScenes.indexOf(currentScene);
                counter.textContent = `Home ${homeIndex + 1} / ${homeScenes.length}`;
                counter.style.display = 'block';
                prevArrow.style.display = 'flex';
                nextArrow.style.display = 'flex';
                
                if (homeIndex === 0) {
                    prevArrow.classList.add('disabled');
                } else {
                    prevArrow.classList.remove('disabled');
                }
                
                if (homeIndex === homeScenes.length - 1) {
                    nextArrow.classList.add('disabled');
                } else {
                    nextArrow.classList.remove('disabled');
                }
            }
        }
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (outdoorScenes.includes(currentScene) || indoorScenes.includes(currentScene) || homeScenes.includes(currentScene)) {
                if (e.key === 'ArrowDown') {
                    navigatePanorama(-1);
                } else if (e.key === 'ArrowUp') {
                    navigatePanorama(1);
                }
            }
        });
        
        // Initialize with first panorama
        initViewer('outdoor_1');
    </script>
</body>
</html>
